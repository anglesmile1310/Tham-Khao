webpackJsonp([1],{"2AW1":function(t,a,s){"use strict";var e=s("mtWM"),n=s.n(e),c=s("y/MS"),o=s.n(c),i=s("GEQZ");a.a={showModal:function(t){this.name=t,this.show_modal=!0},hideModal:function(){this.name="",this.show_modal=!1},mounted:function(){this.init()},data:function(){return{candidateName:[],candidates:[],name:"",show_modal:!1}},methods:{showModal:function(t){this.name=t,this.show_modal=!0},hideModal:function(){this.name="",this.show_modal=!1},init:function(){var t=this,a=localStorage.getItem("Authorization");a&&(n.a.defaults.headers.common.Authorization=a),n.a.post("api/v1/voting/candidate").then(function(a){var s=a.data,e=s.candidates;e=e.map(function(a){return t.hexToString(a)}),t.candidateName=e,t.getVotes()})},getVotes:function(){for(var t=this.candidateName,a=0;a<t.length;a++)this.getVote(t[a])},getVote:function(t){var a=this,s=this.$route.params.address,e=this.candidates.findIndex(function(a){return a.name===t});n.a.post("api/v1/voting/get-vote",{name:t,address:s}).then(function(s){e>=0?a.$set(a.candidates[e],"numberOfVote",s.data.vote):a.candidates.push({name:t,numberOfVote:s.data.vote})})},voteForCandidate:function(t){var a=this,s=this.name;if(this.hideModal(),null!=t&&""!=t){var e=this.$route.params.address;n.a.post("api/v1/voting/vote",{name:s,address:e,passphrase:t}).then(function(t){a.getVote(s),new o.a({text:"You voted successfully!",type:"success",timeout:1e3}).show()}).catch(function(t){var s=t.response.data.msg;a.hideModal(),new o.a({text:s,type:"error",timeout:1e3}).show()})}},hexToString:function(t){t=t.substr(2);for(var a="",s=0;s<t.length;s+=2){var e=String.fromCharCode(parseInt(t.substr(s,2),16));if("\0"==e)break;a+=e}return a}},components:{PasswordModal:i.a}}},"4mG1":function(t,a,s){"use strict";var e=s("mtWM"),n=s.n(e);a.a={data:function(){return{username:"",keystore:""}},methods:{close:function(){this.$emit("close")},clearAccount:function(){this.username="",this.keystore=""},importAccount:function(){var t=this;if(!this.username||!this.keystore)return!1;try{JSON.parse(this.keystore)}catch(t){return console.log(t),!1}n.a.post("api/v1/account/import",{username:this.username,keystore:this.keystore}).then(function(a){var s=a.data,e=s.account;t.$emit("ok",e),t.close()}).catch(function(t){})},filesChange:function(t){var a=this,s=t.target.files||t.dataTransfer.files,e=s[0],n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(t){a.keystore=t.target.result}}}}},"5dK+":function(t,a,s){"use strict";var e=s("mtWM"),n=s.n(e);a.a={props:["account"],mounted:function(){this.getBalance(this.account.id)},data:function(){return{balance:0}},methods:{getKeyStore:function(t){return"data:text/plain;charset=utf-8,"+encodeURIComponent(t)},getTransaction:function(t){return"https://rinkeby.etherscan.io/address/"+t},deleteAccount:function(t){var a=this;confirm("Bạn muốn xóa không?")&&n.a.delete("api/v1/account/"+t).then(function(s){a.$emit("delete",t)}).catch(function(t){alert("cannot delete this account")})},getBalance:function(t){var a=this;n.a.get("api/v1/account/"+t+"/balance").then(function(t){t.data.balance&&(a.balance=t.data.balance)})},vote:function(t){var a=this.account.encrypt,s=JSON.parse(a),e=s.address;this.$router.push({name:"Vote",params:{address:e}})}}}},GEQZ:function(t,a,s){"use strict";var e=s("KpYS"),n=s("pCIR"),c=s("VU/8"),o=c(e.a,n.a,!1,null,null,null);a.a=o.exports},JD12:function(t,a){},KoWr:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],c={render:e,staticRenderFns:n};a.a=c},KpYS:function(t,a,s){"use strict";var e=s("mtWM");s.n(e);a.a={data:function(){return{passphrase:""}},methods:{close:function(){this.$emit("close")},clearAccount:function(){this.passphrase=""},createAccount:function(){this.$emit("ok",this.passphrase),this.clearAccount()}}}},M93x:function(t,a,s){"use strict";function e(t){s("lGzH")}var n=s("xJD8"),c=s("KoWr"),o=s("VU/8"),i=e,r=o(n.a,c.a,!1,i,null,null);a.a=r.exports},NHnr:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("7+uW"),n=s("M93x"),c=s("YaEn"),o=s("yu4w"),i=s.n(o),r=s("zn5d");s.n(r);e.a.config.productionTip=!1,s("JD12"),e.a.use(i.a,{timeout:1e3}),new e.a({el:"#app",router:c.a,template:"<App/>",components:{App:n.a}})},SKni:function(t,a){},Uhku:function(t,a,s){"use strict";var e=s("mtWM"),n=s.n(e),c=s("uK6g");a.a={name:"Main",data:function(){return{login:!1}},mounted:function(){var t=this,a=localStorage.getItem("Authorization");a&&(n.a.defaults.headers.common.Authorization=a),n.a.get("api/v1/login").then(function(a){t.login=!0;var s=a.data;s.token&&(localStorage.setItem("Authorization","Bearer "+s.token),n.a.defaults.headers.common.Authorization=localStorage.getItem("Authorization"))}).catch(function(a){console.log(a),localStorage.removeItem("Authorization"),t.$router.push({name:"Main"})})},components:{Account:c.a}}},"YX+R":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"main"},[t.login?s("div",[s("account")],1):t._e()])},n=[],c={render:e,staticRenderFns:n};a.a=c},YaEn:function(t,a,s){"use strict";var e=s("7+uW"),n=s("/ocq"),c=s("s6+2"),o=s("cNwt");e.a.use(n.a),a.a=new n.a({routes:[{path:"/",name:"Main",component:c.a},{path:"/vote/:address",name:"Vote",component:o.a}]})},cNwt:function(t,a,s){"use strict";var e=s("2AW1"),n=s("vQ/H"),c=s("VU/8"),o=c(e.a,n.a,!1,null,null,null);a.a=o.exports},eAMB:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"account-card"},[s("div",{staticClass:"panel"},[s("div",{staticClass:"panel-heading"},[t._v(t._s(t.account.username))]),t._v(" "),s("div",{staticClass:"panel-block"},[t._v("Address: "+t._s(t.account.address))]),t._v(" "),s("div",{staticClass:"panel-block"},[t._v("Balance: "+t._s(t.balance))]),t._v(" "),s("div",{staticClass:"panel-block"},[s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control"},[s("a",{staticClass:"button",attrs:{href:t.getKeyStore(t.account.encrypt),download:t.account.address+".txt"}},[t._v("\n          Download KeyStore\n          ")])]),t._v(" "),s("p",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(a){t.deleteAccount(t.account.id)}}},[t._v("\n            Delete\n          ")])]),t._v(" "),s("p",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(a){t.vote()}}},[t._v("\n            Vote App\n          ")])]),t._v(" "),s("p",{staticClass:"control"},[s("a",{staticClass:"button",attrs:{href:t.getTransaction(t.account.address)}},[t._v("\n          Transactions\n          ")])])])])])])},n=[],c={render:e,staticRenderFns:n};a.a=c},jNSn:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"account"},[s("div",{staticClass:"container"},[s("button",{staticClass:"button is-primary",on:{click:t.showModal}},[t._v("Create Account")]),t._v(" "),s("button",{staticClass:"button is-primary",on:{click:t.showImportModal}},[t._v("Import Account")]),t._v(" "),t._l(t.account_list,function(a,e){return s("div",{key:e},[s("account-card",{attrs:{account:a},on:{delete:t.deleteAccount}})],1)}),t._v(" "),t.show_modal?s("account-modal",{on:{close:t.hideModal,ok:t.newAccount}}):t._e(),t._v(" "),t.show_import_modal?s("account-import-modal",{on:{close:t.hideModal,ok:t.newAccount}}):t._e()],2)])},n=[],c={render:e,staticRenderFns:n};a.a=c},jwgt:function(t,a,s){"use strict";var e=s("4mG1"),n=s("kP+z"),c=s("VU/8"),o=c(e.a,n.a,!1,null,null,null);a.a=o.exports},"kP+z":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),t._v(" "),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[t._v("Import Account")]),t._v(" "),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.close}})]),t._v(" "),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"email",placeholder:"Username"},domProps:{value:t.username},on:{input:function(a){a.target.composing||(t.username=a.target.value)}}}),t._v(" "),t._m(0,!1,!1),t._v(" "),t._m(1,!1,!1)])]),t._v(" "),s("div",{staticClass:"file"},[s("label",{staticClass:"file-label"},[s("input",{staticClass:"file-input",attrs:{type:"file",name:"keystore"},on:{change:function(a){t.filesChange(a)}}}),t._v(" "),t._m(2,!1,!1)])])]),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:t.importAccount}},[t._v("Import")]),t._v(" "),s("button",{staticClass:"button",on:{click:t.close}},[t._v("Cancel")])])])])},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-envelope"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fa fa-check"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"file-cta"},[s("span",{staticClass:"file-icon"},[s("i",{staticClass:"fa fa-upload"})]),t._v(" "),s("span",{staticClass:"file-label"},[t._v("\n              Choose a file…\n            ")])])}],c={render:e,staticRenderFns:n};a.a=c},lGzH:function(t,a){},pCIR:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),t._v(" "),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[t._v("Password")]),t._v(" "),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.close}})]),t._v(" "),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.passphrase,expression:"passphrase"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.passphrase},on:{input:function(a){a.target.composing||(t.passphrase=a.target.value)}}}),t._v(" "),t._m(0,!1,!1)])])]),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:t.createAccount}},[t._v("OK")]),t._v(" "),s("button",{staticClass:"button",on:{click:t.close}},[t._v("Cancel")])])])])},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-lock"})])}],c={render:e,staticRenderFns:n};a.a=c},qDI4:function(t,a,s){"use strict";var e=s("mtWM"),n=s.n(e),c=s("wtdb"),o=s("yzBq"),i=s("jwgt");a.a={data:function(){return{account_list:[],show_modal:!1,show_import_modal:!1}},mounted:function(){this.updateAccountList()},methods:{showModal:function(){this.show_modal=!0},showImportModal:function(){this.show_import_modal=!0},hideModal:function(){this.show_modal=!1,this.show_import_modal=!1},updateAccountList:function(){var t=this;n.a.get("api/v1/account").then(function(a){t.account_list=a.data.accountList}).catch(function(t){console.log(t)})},newAccount:function(t){this.account_list.push(t)},deleteAccount:function(t){this.account_list=this.account_list.filter(function(a){return a.id!=t})}},components:{AccountCard:c.a,AccountModal:o.a,AccountImportModal:i.a}}},s1il:function(t,a){},"s6+2":function(t,a,s){"use strict";function e(t){s("s1il")}var n=s("Uhku"),c=s("YX+R"),o=s("VU/8"),i=e,r=o(n.a,c.a,!1,i,"data-v-3ce2c76a",null);a.a=r.exports},sCHx:function(t,a,s){"use strict";var e=s("mtWM"),n=s.n(e);a.a={data:function(){return{account:{username:"",passphrase:"",repass:""}}},methods:{close:function(){this.$emit("close")},clearAccount:function(){var t=this;t.account.username="",t.account.passphrase="",t.account.repass=""},createAccount:function(){var t=this;if(t.account.passphrase!=t.account.repass)return void alert("repass is not match");n.a.post("api/v1/account",t.account).then(function(a){var s=a.data.account;t.$emit("ok",s),t.clearAccount(),t.close()}).catch(function(a){localStorage.removeItem("Authorization"),t.clearAccount(),t.close(),this.$router.push({name:"Main"})})}}}},uK6g:function(t,a,s){"use strict";var e=s("qDI4"),n=s("jNSn"),c=s("VU/8"),o=c(e.a,n.a,!1,null,null,null);a.a=o.exports},"vQ/H":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"container"},[s("h1",{staticClass:"title is-2 has-text-centered"},[t._v("A Simple Voting App")]),t._v(" "),s("table",{staticClass:"table is-fullwidth"},[t._m(0,!1,!1),t._v(" "),s("tbody",t._l(t.candidates,function(a,e){return s("tr",{key:e},[s("td",{staticClass:"has-text-centered"},[t._v(t._s(e))]),t._v(" "),s("td",{staticClass:"has-text-centered"},[t._v(t._s(a.name))]),t._v(" "),s("td",{staticClass:"has-text-centered"},[t._v(t._s(a.numberOfVote))]),t._v(" "),s("td",{staticClass:"has-text-centered"},[s("button",{staticClass:"button is-primary",on:{click:function(s){t.showModal(a.name)}}},[t._v("\n                Vote\n            ")])])])}))]),t._v(" "),s("em",[t._v("Note: It takes a significant time to get the result")]),t._v(" "),t.show_modal?s("password-modal",{on:{close:t.hideModal,ok:t.voteForCandidate}}):t._e()],1)])},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{staticClass:"has-text-centered"},[t._v("#")]),t._v(" "),s("th",{staticClass:"has-text-centered"},[t._v("Candidate")]),t._v(" "),s("th",{staticClass:"has-text-centered"},[t._v("Votes")]),t._v(" "),s("th",{staticClass:"has-text-centered"})])])}],c={render:e,staticRenderFns:n};a.a=c},wtdb:function(t,a,s){"use strict";function e(t){s("SKni")}var n=s("5dK+"),c=s("eAMB"),o=s("VU/8"),i=e,r=o(n.a,c.a,!1,i,"data-v-642b7a88",null);a.a=r.exports},xJD8:function(t,a,s){"use strict";a.a={name:"app"}},ytVl:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),t._v(" "),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[t._v("Create Account")]),t._v(" "),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.close}})]),t._v(" "),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.account.username,expression:"account.username"}],staticClass:"input",attrs:{type:"email",placeholder:"Username"},domProps:{value:t.account.username},on:{input:function(a){a.target.composing||t.$set(t.account,"username",a.target.value)}}}),t._v(" "),t._m(0,!1,!1),t._v(" "),t._m(1,!1,!1)])]),t._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.account.passphrase,expression:"account.passphrase"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.account.passphrase},on:{input:function(a){a.target.composing||t.$set(t.account,"passphrase",a.target.value)}}}),t._v(" "),t._m(2,!1,!1)])]),t._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.account.repass,expression:"account.repass"}],staticClass:"input",attrs:{type:"password",placeholder:"Re Enter Password"},domProps:{value:t.account.repass},on:{input:function(a){a.target.composing||t.$set(t.account,"repass",a.target.value)}}}),t._v(" "),t._m(3,!1,!1)])])]),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:t.createAccount}},[t._v("Create")]),t._v(" "),s("button",{staticClass:"button",on:{click:t.close}},[t._v("Cancel")])])])])},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-envelope"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fa fa-check"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-lock"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-lock"})])}],c={render:e,staticRenderFns:n};a.a=c},yzBq:function(t,a,s){"use strict";var e=s("sCHx"),n=s("ytVl"),c=s("VU/8"),o=c(e.a,n.a,!1,null,null,null);a.a=o.exports},zn5d:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.fe22f4266b3c126d93a3.js.map